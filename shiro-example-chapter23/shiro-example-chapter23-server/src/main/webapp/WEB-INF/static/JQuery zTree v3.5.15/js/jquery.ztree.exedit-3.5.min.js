/*
 * JQuery zTree exedit v3.5.15
 * http://zTree.me/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Licensed same as jquery - MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * email: hunter.z@263.net
 * Date: 2013-10-15
 */
(function(w){var I={event:{DRAG:"ztree_drag",DROP:"ztree_drop",REMOVE:"ztree_remove",RENAME:"ztree_rename"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},x={onHoverOverNode:function(b,a){var c=n.getSetting(b.data.treeId),d=n.getRoot(c);if(d.curHoverNode!=a)x.onHoverOutNode(b);d.curHoverNode=a;e.addHoverDom(c,a)},onHoverOutNode:function(b){var b=
n.getSetting(b.data.treeId),a=n.getRoot(b);if(a.curHoverNode&&!n.isSelectedNode(b,a.curHoverNode))e.removeTreeDom(b,a.curHoverNode),a.curHoverNode=null},onMousedownNode:function(b,a){function c(b){if(B.dragFlag==0&&Math.abs(N-b.clientX)<f.edit.drag.minMoveSize&&Math.abs(O-b.clientY)<f.edit.drag.minMoveSize)return!0;var a,c,o,k,i;i=f.data.key.children;M.css("cursor","pointer");if(B.dragFlag==0){if(g.apply(f.callback.beforeDrag,[f.treeId,m],!0)==!1)return l(b),!0;for(a=0,c=m.length;a<c;a++){if(a==0)B.dragNodeShowBefore=
[];o=m[a];o.isParent&&o.open?(e.expandCollapseNode(f,o,!o.open),B.dragNodeShowBefore[o.tId]=!0):B.dragNodeShowBefore[o.tId]=!1}B.dragFlag=1;t.showHoverDom=!1;g.showIfameMask(f,!0);o=!0;k=-1;if(m.length>1){var j=m[0].parentTId?m[0].getParentNode()[i]:n.getNodes(f);i=[];for(a=0,c=j.length;a<c;a++)if(B.dragNodeShowBefore[j[a].tId]!==void 0&&(o&&k>-1&&k+1!==a&&(o=!1),i.push(j[a]),k=a),m.length===i.length){m=i;break}}o&&(H=m[0].getPreNode(),R=m[m.length-1].getNextNode());C=p("<ul class='zTreeDragUL'></ul>",
f);for(a=0,c=m.length;a<c;a++)if(o=m[a],o.editNameFlag=!1,e.selectNode(f,o,a>0),e.removeTreeDom(f,o),k=p("<li id='"+o.tId+"_tmp'></li>",f),k.append(p(o,d.id.A,f).clone()),k.css("padding","0"),k.children("#"+o.tId+d.id.A).removeClass(d.node.CURSELECTED),C.append(k),a==f.edit.drag.maxShowNodeNum-1){k=p("<li id='"+o.tId+"_moretmp'><a>  ...  </a></li>",f);C.append(k);break}C.attr("id",m[0].tId+d.id.UL+"_tmp");C.addClass(f.treeObj.attr("class"));C.appendTo(M);A=p("<span class='tmpzTreeMove_arrow'></span>",
f);A.attr("id","zTreeMove_arrow_tmp");A.appendTo(M);f.treeObj.trigger(d.event.DRAG,[b,f.treeId,m])}if(B.dragFlag==1){s&&A.attr("id")==b.target.id&&u&&b.clientX+F.scrollLeft()+2>w("#"+u+d.id.A,s).offset().left?(o=w("#"+u+d.id.A,s),b.target=o.length>0?o.get(0):b.target):s&&(s.removeClass(d.node.TMPTARGET_TREE),u&&w("#"+u+d.id.A,s).removeClass(d.node.TMPTARGET_NODE+"_"+d.move.TYPE_PREV).removeClass(d.node.TMPTARGET_NODE+"_"+I.move.TYPE_NEXT).removeClass(d.node.TMPTARGET_NODE+"_"+I.move.TYPE_INNER));
u=s=null;J=!1;h=f;o=n.getSettings();for(var D in o)if(o[D].treeId&&o[D].edit.enable&&o[D].treeId!=f.treeId&&(b.target.id==o[D].treeId||w(b.target).parents("#"+o[D].treeId).length>0))J=!0,h=o[D];D=F.scrollTop();k=F.scrollLeft();i=h.treeObj.offset();a=h.treeObj.get(0).scrollHeight;o=h.treeObj.get(0).scrollWidth;c=b.clientY+D-i.top;var q=h.treeObj.height()+i.top-b.clientY-D,r=b.clientX+k-i.left,x=h.treeObj.width()+i.left-b.clientX-k;i=c<f.edit.drag.borderMax&&c>f.edit.drag.borderMin;var j=q<f.edit.drag.borderMax&&
q>f.edit.drag.borderMin,K=r<f.edit.drag.borderMax&&r>f.edit.drag.borderMin,G=x<f.edit.drag.borderMax&&x>f.edit.drag.borderMin,q=c>f.edit.drag.borderMin&&q>f.edit.drag.borderMin&&r>f.edit.drag.borderMin&&x>f.edit.drag.borderMin,r=i&&h.treeObj.scrollTop()<=0,x=j&&h.treeObj.scrollTop()+h.treeObj.height()+10>=a,P=K&&h.treeObj.scrollLeft()<=0,Q=G&&h.treeObj.scrollLeft()+h.treeObj.width()+10>=o;if(b.target&&g.isChildOrSelf(b.target,h.treeId)){for(var E=b.target;E&&E.tagName&&!g.eqs(E.tagName,"li")&&E.id!=
h.treeId;)E=E.parentNode;var S=!0;for(a=0,c=m.length;a<c;a++)if(o=m[a],E.id===o.tId){S=!1;break}else if(p(o,f).find("#"+E.id).length>0){S=!1;break}if(S&&b.target&&g.isChildOrSelf(b.target,E.id+d.id.A))s=w(E),u=E.id}o=m[0];if(q&&g.isChildOrSelf(b.target,h.treeId)){if(!s&&(b.target.id==h.treeId||r||x||P||Q)&&(J||!J&&o.parentTId))s=h.treeObj;i?h.treeObj.scrollTop(h.treeObj.scrollTop()-10):j&&h.treeObj.scrollTop(h.treeObj.scrollTop()+10);K?h.treeObj.scrollLeft(h.treeObj.scrollLeft()-10):G&&h.treeObj.scrollLeft(h.treeObj.scrollLeft()+
10);s&&s!=h.treeObj&&s.offset().left<h.treeObj.offset().left&&h.treeObj.scrollLeft(h.treeObj.scrollLeft()+s.offset().left-h.treeObj.offset().left)}C.css({top:b.clientY+D+3+"px",left:b.clientX+k+3+"px"});i=a=0;if(s&&s.attr("id")!=h.treeId){var y=u==null?null:n.getNodeCache(h,u);c=b.ctrlKey&&f.edit.drag.isMove&&f.edit.drag.isCopy||!f.edit.drag.isMove&&f.edit.drag.isCopy;a=!!(H&&u===H.tId);i=!!(R&&u===R.tId);k=o.parentTId&&o.parentTId==u;o=(c||!i)&&g.apply(h.edit.drag.prev,[h.treeId,m,y],!!h.edit.drag.prev);
a=(c||!a)&&g.apply(h.edit.drag.next,[h.treeId,m,y],!!h.edit.drag.next);G=(c||!k)&&!(h.data.keep.leaf&&!y.isParent)&&g.apply(h.edit.drag.inner,[h.treeId,m,y],!!h.edit.drag.inner);if(!o&&!a&&!G){if(s=null,u="",v=d.move.TYPE_INNER,A.css({display:"none"}),window.zTreeMoveTimer)clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null}else{c=w("#"+u+d.id.A,s);i=y.isLastNode?null:w("#"+y.getNextNode().tId+d.id.A,s.next());j=c.offset().top;k=c.offset().left;K=o?G?0.25:a?0.5:1:-1;G=a?G?0.75:
o?0.5:0:-1;b=(b.clientY+D-j)/c.height();(K==1||b<=K&&b>=-0.2)&&o?(a=1-A.width(),i=j-A.height()/2,v=d.move.TYPE_PREV):(G==0||b>=G&&b<=1.2)&&a?(a=1-A.width(),i=i==null||y.isParent&&y.open?j+c.height()-A.height()/2:i.offset().top-A.height()/2,v=d.move.TYPE_NEXT):(a=5-A.width(),i=j,v=d.move.TYPE_INNER);A.css({display:"block",top:i+"px",left:k+a+"px"});c.addClass(d.node.TMPTARGET_NODE+"_"+v);if(T!=u||U!=v)L=(new Date).getTime();if(y&&y.isParent&&v==d.move.TYPE_INNER&&(b=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==
y.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===y.tId&&(b=!1),b))window.zTreeMoveTimer=setTimeout(function(){v==d.move.TYPE_INNER&&y&&y.isParent&&!y.open&&(new Date).getTime()-L>h.edit.drag.autoOpenTime&&g.apply(h.callback.beforeDragOpen,[h.treeId,y],!0)&&(e.switchNode(h,y),h.edit.drag.autoExpandTrigger&&h.treeObj.trigger(d.event.EXPAND,[h.treeId,y]))},h.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=y.tId}}else if(v=
d.move.TYPE_INNER,s&&g.apply(h.edit.drag.inner,[h.treeId,m,null],!!h.edit.drag.inner)?s.addClass(d.node.TMPTARGET_TREE):s=null,A.css({display:"none"}),window.zTreeMoveTimer)clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null;T=u;U=v}return!1}function l(b){if(window.zTreeMoveTimer)clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null;U=T=null;F.unbind("mousemove",c);F.unbind("mouseup",l);F.unbind("selectstart",k);M.css("cursor","auto");s&&(s.removeClass(d.node.TMPTARGET_TREE),
u&&w("#"+u+d.id.A,s).removeClass(d.node.TMPTARGET_NODE+"_"+d.move.TYPE_PREV).removeClass(d.node.TMPTARGET_NODE+"_"+I.move.TYPE_NEXT).removeClass(d.node.TMPTARGET_NODE+"_"+I.move.TYPE_INNER));g.showIfameMask(f,!1);t.showHoverDom=!0;if(B.dragFlag!=0){B.dragFlag=0;var a,i,j;for(a=0,i=m.length;a<i;a++)j=m[a],j.isParent&&B.dragNodeShowBefore[j.tId]&&!j.open&&(e.expandCollapseNode(f,j,!j.open),delete B.dragNodeShowBefore[j.tId]);C&&C.remove();A&&A.remove();var q=b.ctrlKey&&f.edit.drag.isMove&&f.edit.drag.isCopy||
!f.edit.drag.isMove&&f.edit.drag.isCopy;!q&&s&&u&&m[0].parentTId&&u==m[0].parentTId&&v==d.move.TYPE_INNER&&(s=null);if(s){var r=u==null?null:n.getNodeCache(h,u);if(g.apply(f.callback.beforeDrop,[h.treeId,m,r,v,q],!0)==!1)e.selectNodes(x,m);else{var z=q?g.clone(m):m;a=function(){if(J){if(!q)for(var a=0,c=m.length;a<c;a++)e.removeNode(f,m[a]);if(v==d.move.TYPE_INNER)e.addNodes(h,r,z);else if(e.addNodes(h,r.getParentNode(),z),v==d.move.TYPE_PREV)for(a=0,c=z.length;a<c;a++)e.moveNode(h,r,z[a],v,!1);else for(a=
-1,c=z.length-1;a<c;c--)e.moveNode(h,r,z[c],v,!1)}else if(q&&v==d.move.TYPE_INNER)e.addNodes(h,r,z);else if(q&&e.addNodes(h,r.getParentNode(),z),v!=d.move.TYPE_NEXT)for(a=0,c=z.length;a<c;a++)e.moveNode(h,r,z[a],v,!1);else for(a=-1,c=z.length-1;a<c;c--)e.moveNode(h,r,z[c],v,!1);e.selectNodes(h,z);p(z[0],f).focus().blur();f.treeObj.trigger(d.event.DROP,[b,h.treeId,z,r,v,q])};v==d.move.TYPE_INNER&&g.canAsync(h,r)?e.asyncNode(h,r,!1,a):a()}}else e.selectNodes(x,m),f.treeObj.trigger(d.event.DROP,[b,f.treeId,
m,null,null,null])}}function k(){return!1}var i,j,f=n.getSetting(b.data.treeId),B=n.getRoot(f),t=n.getRoots();if(b.button==2||!f.edit.enable||!f.edit.drag.isCopy&&!f.edit.drag.isMove)return!0;var q=b.target,r=n.getRoot(f).curSelectedList,m=[];if(n.isSelectedNode(f,a))for(i=0,j=r.length;i<j;i++){if(r[i].editNameFlag&&g.eqs(q.tagName,"input")&&q.getAttribute("treeNode"+d.id.INPUT)!==null)return!0;m.push(r[i]);if(m[0].parentTId!==r[i].parentTId){m=[a];break}}else m=[a];e.editNodeBlur=!0;e.cancelCurEditNode(f);
var F=w(f.treeObj.get(0).ownerDocument),M=w(f.treeObj.get(0).ownerDocument.body),C,A,s,J=!1,h=f,x=f,H,R,T=null,U=null,u=null,v=d.move.TYPE_INNER,N=b.clientX,O=b.clientY,L=(new Date).getTime();g.uCanDo(f)&&F.bind("mousemove",c);F.bind("mouseup",l);F.bind("selectstart",k);b.preventDefault&&b.preventDefault();return!0}};w.extend(!0,w.fn.zTree.consts,I);w.extend(!0,w.fn.zTree._z,{tools:{getAbs:function(b){b=b.getBoundingClientRect();return[b.left+(document.body.scrollLeft+document.documentElement.scrollLeft),
b.top+(document.body.scrollTop+document.documentElement.scrollTop)]},inputFocus:function(b){b.get(0)&&(b.focus(),g.setCursorPosition(b.get(0),b.val().length))},inputSelect:function(b){b.get(0)&&(b.focus(),b.select())},setCursorPosition:function(b,a){if(b.setSelectionRange)b.focus(),b.setSelectionRange(a,a);else if(b.createTextRange){var c=b.createTextRange();c.collapse(!0);c.moveEnd("character",a);c.moveStart("character",a);c.select()}},showIfameMask:function(b,a){for(var c=n.getRoot(b);c.dragMaskList.length>
0;)c.dragMaskList[0].remove(),c.dragMaskList.shift();if(a)for(var d=p("iframe",b),e=0,i=d.length;e<i;e++){var j=d.get(e),f=g.getAbs(j),j=p("<div id='zTreeMask_"+e+"' class='zTreeMask' style='top:"+f[1]+"px; left:"+f[0]+"px; width:"+j.offsetWidth+"px; height:"+j.offsetHeight+"px;'></div>",b);j.appendTo(p("body",b));c.dragMaskList.push(j)}}},view:{addEditBtn:function(b,a){if(!(a.editNameFlag||p(a,d.id.EDIT,b).length>0)&&g.apply(b.edit.showRenameBtn,[b.treeId,a],b.edit.showRenameBtn)){var c=p(a,d.id.A,
b),l="<span class='"+d.className.BUTTON+" edit' id='"+a.tId+d.id.EDIT+"' title='"+g.apply(b.edit.renameTitle,[b.treeId,a],b.edit.renameTitle)+"' treeNode"+d.id.EDIT+" style='display:none;'></span>";c.append(l);p(a,d.id.EDIT,b).bind("click",function(){if(!g.uCanDo(b)||g.apply(b.callback.beforeEditName,[b.treeId,a],!0)==!1)return!1;e.editNode(b,a);return!1}).show()}},addRemoveBtn:function(b,a){if(!(a.editNameFlag||p(a,d.id.REMOVE,b).length>0)&&g.apply(b.edit.showRemoveBtn,[b.treeId,a],b.edit.showRemoveBtn)){var c=
p(a,d.id.A,b),l="<span class='"+d.className.BUTTON+" remove' id='"+a.tId+d.id.REMOVE+"' title='"+g.apply(b.edit.removeTitle,[b.treeId,a],b.edit.removeTitle)+"' treeNode"+d.id.REMOVE+" style='display:none;'></span>";c.append(l);p(a,d.id.REMOVE,b).bind("click",function(){if(!g.uCanDo(b)||g.apply(b.callback.beforeRemove,[b.treeId,a],!0)==!1)return!1;e.removeNode(b,a);b.treeObj.trigger(d.event.REMOVE,[b.treeId,a]);return!1}).bind("mousedown",function(){return!0}).show()}},addHoverDom:function(b,a){if(n.getRoots().showHoverDom)a.isHover=
!0,b.edit.enable&&(e.addEditBtn(b,a),e.addRemoveBtn(b,a)),g.apply(b.view.addHoverDom,[b.treeId,a])},cancelCurEditNode:function(b,a,c){var l=n.getRoot(b),k=b.data.key.name,i=l.curEditNode;if(i){var j=l.curEditInput,a=a?a:c?i[k]:j.val();if(g.apply(b.callback.beforeRename,[b.treeId,i,a,c],!0)===!1)return!1;else i[k]=a,b.treeObj.trigger(d.event.RENAME,[b.treeId,i,c]);p(i,d.id.A,b).removeClass(d.node.CURSELECTED_EDIT);j.unbind();e.setNodeName(b,i);i.editNameFlag=!1;l.curEditNode=null;l.curEditInput=null;
e.selectNode(b,i,!1)}return l.noSelection=!0},editNode:function(b,a){var c=n.getRoot(b);e.editNodeBlur=!1;if(n.isSelectedNode(b,a)&&c.curEditNode==a&&a.editNameFlag)setTimeout(function(){g.inputFocus(c.curEditInput)},0);else{var l=b.data.key.name;a.editNameFlag=!0;e.removeTreeDom(b,a);e.cancelCurEditNode(b);e.selectNode(b,a,!1);p(a,d.id.SPAN,b).html("<input type=text class='rename' id='"+a.tId+d.id.INPUT+"' treeNode"+d.id.INPUT+" >");var k=p(a,d.id.INPUT,b);k.attr("value",a[l]);b.edit.editNameSelectAll?
g.inputSelect(k):g.inputFocus(k);k.bind("blur",function(){e.editNodeBlur||e.cancelCurEditNode(b)}).bind("keydown",function(a){a.keyCode=="13"?(e.editNodeBlur=!0,e.cancelCurEditNode(b)):a.keyCode=="27"&&e.cancelCurEditNode(b,null,!0)}).bind("click",function(){return!1}).bind("dblclick",function(){return!1});p(a,d.id.A,b).addClass(d.node.CURSELECTED_EDIT);c.curEditInput=k;c.noSelection=!1;c.curEditNode=a}},moveNode:function(b,a,c,l,k,i){var j=n.getRoot(b),f=b.data.key.children;if(a!=c&&(!b.data.keep.leaf||
!a||a.isParent||l!=d.move.TYPE_INNER)){var g=c.parentTId?c.getParentNode():j,t=a===null||a==j;t&&a===null&&(a=j);if(t)l=d.move.TYPE_INNER;j=a.parentTId?a.getParentNode():j;if(l!=d.move.TYPE_PREV&&l!=d.move.TYPE_NEXT)l=d.move.TYPE_INNER;if(l==d.move.TYPE_INNER)if(t)c.parentTId=null;else{if(!a.isParent)a.isParent=!0,a.open=!!a.open,e.setNodeLineIcos(b,a);c.parentTId=a.tId}var q;t?q=t=b.treeObj:(!i&&l==d.move.TYPE_INNER?e.expandCollapseNode(b,a,!0,!1):i||e.expandCollapseNode(b,a.getParentNode(),!0,!1),
t=p(a,b),q=p(a,d.id.UL,b),t.get(0)&&!q.get(0)&&(q=[],e.makeUlHtml(b,a,q,""),t.append(q.join(""))),q=p(a,d.id.UL,b));var r=p(c,b);r.get(0)?t.get(0)||r.remove():r=e.appendNodes(b,c.level,[c],null,!1,!0).join("");q.get(0)&&l==d.move.TYPE_INNER?q.append(r):t.get(0)&&l==d.move.TYPE_PREV?t.before(r):t.get(0)&&l==d.move.TYPE_NEXT&&t.after(r);var m=-1,w=0,x=null,t=null,C=c.level;if(c.isFirstNode){if(m=0,g[f].length>1)x=g[f][1],x.isFirstNode=!0}else if(c.isLastNode)m=g[f].length-1,x=g[f][m-1],x.isLastNode=
!0;else for(q=0,r=g[f].length;q<r;q++)if(g[f][q].tId==c.tId){m=q;break}m>=0&&g[f].splice(m,1);if(l!=d.move.TYPE_INNER)for(q=0,r=j[f].length;q<r;q++)j[f][q].tId==a.tId&&(w=q);if(l==d.move.TYPE_INNER){a[f]||(a[f]=[]);if(a[f].length>0)t=a[f][a[f].length-1],t.isLastNode=!1;a[f].splice(a[f].length,0,c);c.isLastNode=!0;c.isFirstNode=a[f].length==1}else a.isFirstNode&&l==d.move.TYPE_PREV?(j[f].splice(w,0,c),t=a,t.isFirstNode=!1,c.parentTId=a.parentTId,c.isFirstNode=!0,c.isLastNode=!1):a.isLastNode&&l==d.move.TYPE_NEXT?
(j[f].splice(w+1,0,c),t=a,t.isLastNode=!1,c.parentTId=a.parentTId,c.isFirstNode=!1,c.isLastNode=!0):(l==d.move.TYPE_PREV?j[f].splice(w,0,c):j[f].splice(w+1,0,c),c.parentTId=a.parentTId,c.isFirstNode=!1,c.isLastNode=!1);n.fixPIdKeyValue(b,c);n.setSonNodeLevel(b,c.getParentNode(),c);e.setNodeLineIcos(b,c);e.repairNodeLevelClass(b,c,C);!b.data.keep.parent&&g[f].length<1?(g.isParent=!1,g.open=!1,a=p(g,d.id.UL,b),l=p(g,d.id.SWITCH,b),f=p(g,d.id.ICON,b),e.replaceSwitchClass(g,l,d.folder.DOCU),e.replaceIcoClass(g,
f,d.folder.DOCU),a.css("display","none")):x&&e.setNodeLineIcos(b,x);t&&e.setNodeLineIcos(b,t);b.check&&b.check.enable&&e.repairChkClass&&(e.repairChkClass(b,g),e.repairParentChkClassWithSelf(b,g),g!=c.parent&&e.repairParentChkClassWithSelf(b,c));i||e.expandCollapseParentNode(b,c.getParentNode(),!0,k)}},removeEditBtn:function(b,a){p(a,d.id.EDIT,b).unbind().remove()},removeRemoveBtn:function(b,a){p(a,d.id.REMOVE,b).unbind().remove()},removeTreeDom:function(b,a){a.isHover=!1;e.removeEditBtn(b,a);e.removeRemoveBtn(b,
a);g.apply(b.view.removeHoverDom,[b.treeId,a])},repairNodeLevelClass:function(b,a,c){if(c!==a.level){var e=p(a,b),g=p(a,d.id.A,b),b=p(a,d.id.UL,b),c=d.className.LEVEL+c,a=d.className.LEVEL+a.level;e.removeClass(c);e.addClass(a);g.removeClass(c);g.addClass(a);b.removeClass(c);b.addClass(a)}},selectNodes:function(b,a){for(var c=0,d=a.length;c<d;c++)e.selectNode(b,a[c],c>0)}},event:{},data:{setSonNodeLevel:function(b,a,c){if(c){var d=b.data.key.children;c.level=a?a.level+1:0;if(c[d])for(var a=0,e=c[d].length;a<
e;a++)c[d][a]&&n.setSonNodeLevel(b,c,c[d][a])}}}});var H=w.fn.zTree,g=H._z.tools,d=H.consts,e=H._z.view,n=H._z.data,p=g.$;n.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,
beforeEditName:null,beforeRename:null,onDrag:null,onDrop:null,onRename:null}});n.addInitBind(function(b){var a=b.treeObj,c=d.event;a.bind(c.RENAME,function(a,c,d,e){g.apply(b.callback.onRename,[a,c,d,e])});a.bind(c.REMOVE,function(a,c,d){g.apply(b.callback.onRemove,[a,c,d])});a.bind(c.DRAG,function(a,c,d,e){g.apply(b.callback.onDrag,[c,d,e])});a.bind(c.DROP,function(a,c,d,e,f,n,p){g.apply(b.callback.onDrop,[c,d,e,f,n,p])})});n.addInitUnBind(function(b){var b=b.treeObj,a=d.event;b.unbind(a.RENAME);
b.unbind(a.REMOVE);b.unbind(a.DRAG);b.unbind(a.DROP)});n.addInitCache(function(){});n.addInitNode(function(b,a,c){if(c)c.isHover=!1,c.editNameFlag=!1});n.addInitProxy(function(b){var a=b.target,c=n.getSetting(b.data.treeId),e=b.relatedTarget,k="",i=null,j="",f=null,p=null;if(g.eqs(b.type,"mouseover")){if(p=g.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+d.id.A}]))k=g.getNodeMainDom(p).id,j="hoverOverNode"}else if(g.eqs(b.type,"mouseout"))p=g.getMDom(c,e,[{tagName:"a",attrName:"treeNode"+d.id.A}]),
p||(k="remove",j="hoverOutNode");else if(g.eqs(b.type,"mousedown")&&(p=g.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+d.id.A}])))k=g.getNodeMainDom(p).id,j="mousedownNode";if(k.length>0)switch(i=n.getNodeCache(c,k),j){case "mousedownNode":f=x.onMousedownNode;break;case "hoverOverNode":f=x.onHoverOverNode;break;case "hoverOutNode":f=x.onHoverOutNode}return{stop:!1,node:i,nodeEventType:j,nodeEventCallback:f,treeEventType:"",treeEventCallback:null}});n.addInitRoot(function(b){var b=n.getRoot(b),a=n.getRoots();
b.curEditNode=null;b.curEditInput=null;b.curHoverNode=null;b.dragFlag=0;b.dragNodeShowBefore=[];b.dragMaskList=[];a.showHoverDom=!0});n.addZTreeTools(function(b,a){a.cancelEditName=function(a){n.getRoot(b).curEditNode&&e.cancelCurEditNode(b,a?a:null,!0)};a.copyNode=function(a,l,k,i){if(!l)return null;if(a&&!a.isParent&&b.data.keep.leaf&&k===d.move.TYPE_INNER)return null;var j=g.clone(l);if(!a)a=null,k=d.move.TYPE_INNER;k==d.move.TYPE_INNER?(l=function(){e.addNodes(b,a,[j],i)},g.canAsync(b,a)?e.asyncNode(b,
a,i,l):l()):(e.addNodes(b,a.parentNode,[j],i),e.moveNode(b,a,j,k,!1,i));return j};a.editName=function(a){a&&a.tId&&a===n.getNodeCache(b,a.tId)&&(a.parentTId&&e.expandCollapseParentNode(b,a.getParentNode(),!0),e.editNode(b,a))};a.moveNode=function(a,l,k,i){function j(){e.moveNode(b,a,l,k,!1,i)}if(!l)return l;if(a&&!a.isParent&&b.data.keep.leaf&&k===d.move.TYPE_INNER)return null;else if(a&&(l.parentTId==a.tId&&k==d.move.TYPE_INNER||p(l,b).find("#"+a.tId).length>0))return null;else a||(a=null);g.canAsync(b,
a)&&k===d.move.TYPE_INNER?e.asyncNode(b,a,i,j):j();return l};a.setEditable=function(a){b.edit.enable=a;return this.refresh()}});var N=e.cancelPreSelectedNode;e.cancelPreSelectedNode=function(b,a){for(var c=n.getRoot(b).curSelectedList,d=0,g=c.length;d<g;d++)if(!a||a===c[d])if(e.removeTreeDom(b,c[d]),a)break;N&&N.apply(e,arguments)};var O=e.createNodes;e.createNodes=function(b,a,c,d){O&&O.apply(e,arguments);c&&e.repairParentChkClassWithSelf&&e.repairParentChkClassWithSelf(b,d)};var V=e.makeNodeUrl;
e.makeNodeUrl=function(b,a){return b.edit.enable?null:V.apply(e,arguments)};var L=e.removeNode;e.removeNode=function(b,a){var c=n.getRoot(b);if(c.curEditNode===a)c.curEditNode=null;L&&L.apply(e,arguments)};var P=e.selectNode;e.selectNode=function(b,a,c){var d=n.getRoot(b);if(n.isSelectedNode(b,a)&&d.curEditNode==a&&a.editNameFlag)return!1;P&&P.apply(e,arguments);e.addHoverDom(b,a);return!0};var Q=g.uCanDo;g.uCanDo=function(b,a){var c=n.getRoot(b);if(a&&(g.eqs(a.type,"mouseover")||g.eqs(a.type,"mouseout")||
g.eqs(a.type,"mousedown")||g.eqs(a.type,"mouseup")))return!0;if(c.curEditNode)e.editNodeBlur=!1,c.curEditInput.focus();return!c.curEditNode&&(Q?Q.apply(e,arguments):!0)}})(jQuery);
